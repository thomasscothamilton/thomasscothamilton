apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: gatekeeper
  namespace: argocd
spec:
  project: default
  source:
    repoURL: 'https://open-policy-agent.github.io/gatekeeper/charts'
    targetRevision: 'v3.11.0'   # Example version, adjust as needed
    chart: 'gatekeeper'
    helm:
      releaseName: 'gatekeeper'
      values: |
        # Minimal example - override Helm values as needed
        audit:
          logLevel: INFO
  destination:
    server: 'https://kubernetes.default.svc'
    namespace: gatekeeper-system
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true